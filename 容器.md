# 容器

### 1.Java容器有哪些



### 2.Collection和Collections有什么区别

- java.util.Collection是一个集合接口（集合类的一个顶级接口）。它提供了对集合对象进行基本操作的通用接口方法。其直接继承接口有List与Set。

```java
主要方法:
boolean add(Object o)//添加对象到集合
boolean remove(Object o)//删除指定的对象
int size()//返回当前集合中元素的数量
boolean contains(Object o)//查找集合中是否有指定的对象
boolean isEmpty()//判断集合是否为空
Iterator iterator()//返回一个迭代器
boolean containsAll(Collection c)//查找集合中是否有集合c中的元素
boolean addAll(Collection c)//将集合c中所有的元素添加给该集合
void clear()//删除集合中所有元素
void removeAll(Collection c)//从集合中删除c集合中也有的元素
void retainAll(Collection c)//从集合中删除集合c中不包含的元素
```

- Collections是集合类的一个工具类/帮助类，其中提供了一系列静态方法，用于对集合中元素进行排序、搜索以及线程安全等各种操作。



### 3.List、Set、Map之间区别

|    比较    |                        List                         |                     Set                      |                             Map                              |
| :--------: | :-------------------------------------------------: | :------------------------------------------: | :----------------------------------------------------------: |
|  继承接口  |                     Collection                      |                  Collection                  |                                                              |
| 常见实现类 |        ArrayList、LinkedList、Vector、Stack         |       HashSet、LinkedHashSet、TreeSet        |                 HashMap、TreeMap、Hashtable                  |
|  常见方法  | add()、remove()、clear()、get()、contains()、size() | add()、remove()、clear()、contains()、size() | put()、get()、remove()、clear()、containsKey()、containsValue()、keySet()、values()、size() |
|    元素    |                       可重复                        |          不可重复（用equals()判断）          |                           不可重复                           |
|    顺序    |                        有序                         |          无序（实际由HashCode决定）          |                                                              |
|  线程安全  |                   Vector线程安全                    |                                              |                      Hashtable线程安全                       |



### 4.HashMap和Hashtable有什么区别

- HashMap去掉了Hashtable的 `contains()`方法，但是加上了 `containsValue()`方法和 `containsKey()`方法。
- ⭐Hashtable是同步的，而HashMap是非同步的，效率上比Hashtable高。
- ⭐HashMap允许空键值，而Hashtable不允许。
- ⭐HashMap线程不安全，只适用于单线程环境下；多线程环境下可用ConcurrentHashMap。而Hashtable是线程安全的。
- HashMap初始容量为16，扩容方式为：newsize = oldsize * 2，size一定为2的n次幂。而Hashtable初始容量为11，扩容方式为：newsize = olesize * 2+1
- 两者计算hash方法不同：

```java
//Hashtable计算hash是直接使用key的hashcode对table数组的长度直接进行取模：
int hash = key.hashCode();
int index = (hash & 0x7FFFFFFF) % tab.length;

//HashMap计算hash对key的hashcode进行了二次hash，以获得更好的散列值，然后对table数组长度取摸：
static int hash(int h) {
     h ^= (h >>> 20) ^ (h >>> 12);
     return h ^ (h >>> 7) ^ (h >>> 4);
 }

static int indexFor(int h, int length) {
     return h & (length-1);
 }
```



### 5.如何决定使用HashMap还是TreeMap

- HashMap适用于在Map中插入、删除和定位元素
- TreeMap适用于按自然顺序或自定义顺序遍历key
- ⭐HashMap通常比TreeMap快一点（由于树和哈希表的数据结构），建议多使用HashMap，在需要排序Map的时候才用TreeMap



### 6.说一下HashMap的实现原理

- HashMap是基于哈希表的Map接口的非同步实现，允许使用null值和null键，但不保证映射的顺序。
- ⭐底层使用数组实现，数组中每一项是个单向链表也即“链表散列”的数据结构，即数组和链表的结合体。
- ⭐当我们往HashMap中put元素时，首先根据key的hashcode重新计算hash值，根据hash值得到这个元素在数组中的位置（下标），如果该数组在该位置上已经存放了其他元素，那么在这个位置上的元素将以链表的形式存放，新加入的放在链表头，最先加入的放入链表尾。如果数组中该位置上没有元素，就直接将该元素放到数组的该位置上。
- JDK 1.8对HashMap实现了优化，当链表中的节点数据超过8个之后，该链表会转为红黑树来提高查询效率，从原来O（n）到O（logn）



### 7.说一下HashSet的实现原理

